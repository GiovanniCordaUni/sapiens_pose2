# Configurazione per l'elaborazione dei video con rilevamento pose Sapiens
# Utilizza il modello Sapiens con checkpoint COCO 17 nativo

# paths
paths:
  # Root directories
  input_root: "data/input"
  output_root: "data/output"
  sapiens_host: "sapiens_host" # Directory principale per i modelli Sapiens
  
  # Subdirectories (relative alla root)
  frames_dir: "frames"
  videos_dir: "videos"
  keypoints_dir: "keypoints_jsonl"
  overlay_dir: "overlay_videos"

# Models
models:
  yolo:
    weights: "weights/yolo/yolov8n.pt"
    confidence: 0.30
    imgsz: 640
    person_class_id: 0  # COCO class ID for person
    
  sapiens:
    # COCO 17 native checkpoint - output diretto 17 keypoints, nessun mapping richiesto
    # checpoint: "pose/checkpoints/sapiens_0.6b/sapiens_0.6b_coco_best_coco_AP_812_torchscript.pt2"
    # checkpoint: "pose/checkpoints/sapiens_1b/sapiens_1.3b_coco_best_coco_AP_820_torchscript.pt2"
    checkpoint: "pose/checkpoints/sapiens_0.3b/sapiens_0.3b_coco_best_coco_AP_796_torchscript.pt2"
    input_width: 768
    input_height: 1024

# ------------------------------------------------------------------------------
# Detection
# ------------------------------------------------------------------------------
detection:
  # Padding around detected person box (fraction of box size)
  box_padding: 0.20
  # IoU bias for tracking (0 = pure confidence, 1 = pure IoU with prev box)
  iou_bias: 0.7

# ------------------------------------------------------------------------------
# Processing
# ------------------------------------------------------------------------------
processing:
  # Process every N-th frame
  frame_stride: 1
  # Device: "cuda", "cpu", or "auto" (auto-detect)
  device: "auto"

# ------------------------------------------------------------------------------
# Visualization
# ------------------------------------------------------------------------------
visualization:
  # Keypoint confidence threshold for drawing
  keypoint_threshold: 0.35
  # Circle radius for keypoints
  keypoint_radius: 5
  # Line thickness for skeleton
  skeleton_thickness: 2
  # Colors (BGR format)
  keypoint_color: [0, 255, 0]  # green
  skeleton_color: [0, 255, 0]  # green
  bbox_color: [255, 0, 0]      # blue
